{% load i18n %}

<table class="table table-hover table-condensed">
  <tr>
    <th>{% trans 'ID' %}</th>
    <td colspan='2'>{{ instrument.id }}</td>
  </tr>
  <tr>
    <th>{% trans 'Related Station' %}</th>
    <td colspan='2'><a href="{% url "station_detail" instrument.station.id %}">{{ instrument.station }}</a></td>
  </tr>
  <tr>
    <th>{% trans 'Name' %}</th>
    <td colspan='2'>{{ instrument.name }}</td>
  </tr>
  <tr>
    <th>{% trans 'Type' %}</th>
    <td colspan='2'>{{ instrument.type }}</td>
  </tr>
  <tr>
    <th>{% trans 'Remarks' %}</th>
    <td colspan='2'>{{ instrument.remarks }}</td>
  </tr>
  <tr>
    <th>{% trans 'Manufacturer' %}</th>
    <td colspan='2'>{{ instrument.manufacturer }}</td>
  </tr>
  <tr>
    <th>{% trans 'Model' %}</th>
    <td colspan='2'>{{ instrument.model }}</td>
  </tr>
  <tr>
    <th>{% trans 'Start Date' %}</th>
    <td colspan='2'>{{ instrument.start_date|date:"Y/m/d" }}</td>
  </tr>
  <tr>
    <th>{% trans 'End Date' %}</th>
    <td colspan='2'>{{ instrument.end_date|date:"Y/m/d" }}</td>
  </tr>
  <tr>
    <th>{% trans 'Timeseries' %}</th>
    {% if instrument.timeseries_set.count %}
      <td colspan="2">
        <div class="table-responsive">
          <table class="table table-hover table-condensed">
            <thead>
              <tr>
                <th>{% trans "ID" %}</th>
                <th>{% trans "Name" %}</th>
                <th>{% trans "Variable" %}</th>
                <th>{% trans "Time step" %}</th>
                <th>{% trans "Unit Of Measurement" %}</th>
                <th>{% trans "Remarks" %}</th>
                <th>{% trans "Instrument" %}</th>
                <th>{% trans "Start Date" %}</th>
                <th>{% trans "End Date" %}</th>
              </tr>
            </thead>
            <tbody>
              {% for t in instrument.timeseries_set.all %}
                {% if not t.hidden %}
                  {% with t.id as t_id %}
                    {% url "timeseries_detail" station_id=instrument.station.id pk=t_id as timeseries_url %}
                    <tr>
                      <td><a href="{{ timeseries_url }}">{{ t_id }}</a></td>
                      <td>{{ t.name }}</td>
                      <td>{{ t.variable }}</td>
                      <td>{% if not t.time_step %}
                            {% trans 'Variable step' %}
                          {% else %}
                            {{ t.time_step }}
                          {% endif %}
                      </td>
                      <td>{{ t.unit_of_measurement }}</td>
                      <td>{{ t.remarks }}</td>
                      <td>{{ t.instrument }}</td>
                      <td>{{ t.start_date|date:"Y/m/d H:i" }}</td>
                      <td>{{ t.end_date|date:"Y/m/d H:i" }}</td>
                    {% endwith %}
                  {% endif %}
                {% endfor %}
              </tr>
            </table>
          </div>
        </td>
    {% endif %}
  </tr>
</table>
