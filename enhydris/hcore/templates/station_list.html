{% extends "station_list_common.html" %}
{% load i18n %}
{% block title %} {% trans 'Enhydris - Stations' %}{% endblock %}
{% load sorting_tags %}
{% load render_table from django_tables2 %}

{% block extracss %}
    <link rel="stylesheet" href="{{ STATIC_URL }}django_tables2/themes/paleblue/css/screen.css">
    <style type="text/css">
    #map {
        width: 560px;
        height: 440px;
        border: 1px solid #eee;
        z-index: 1;
    }
    </style>
{% endblock %}

{% block extrajs %}
    {{ block.super }}
    <script type="text/javascript">
    $(document).ready(function() {
	  // Reset Font Size
	  var originalFontSize = $('.data_table').css('font-size');
		$(".resetFont").click(function(){
		$('.data_table').css('font-size', originalFontSize);
	  });
	  // Increase Font Size
	  $(".increaseFont").click(function(){
		var currentFontSize = $('.data_table').css('font-size');
		var currentFontSizeNum = parseFloat(currentFontSize, 10);
		var newFontSize = currentFontSizeNum + 0.5;
		$('.data_table').css('font-size', newFontSize);
		return false;
	  });
	  // Decrease Font Size
	  $(".decreaseFont").click(function(){
		var currentFontSize = $('.data_table').css('font-size');
		var currentFontSizeNum = parseFloat(currentFontSize, 10);
		var newFontSize = currentFontSizeNum - 0.5;
		$('.data_table').css('font-size', newFontSize);
		return false;
	  });

    });

    function GetRectAreaResults(){
        var aurl=window.location.pathname;
        var urlparams = Arg.all();
        urlparams['bbox'] = enhydris.map.getExtent().transform(new
        OpenLayers.Projection("EPSG:900913"), new OpenLayers.Projection("EPSG:4326")).toBBOX(7);
        var aarray = [];
        var i = 0;
        for(param in urlparams){
            if(param=='page')
                continue;
            aarray[i] = param+"="+urlparams[param];
            i++;
        }
        window.location=encodeURI(aurl+'?'+aarray.join('&'));
    }
    </script>
{% endblock %}

{% block content %}
    {% autosort station_list %}
    
        <div id="tabs-1" >
        <div>
           <div style="float: right;">
                <div id="map" style="float: left;">
                <div id="processing_indicator" style="position: absolute; margin-top:212px; margin-left: 272px; z-index: 5000;"></div></div>
           </div>
         <button type="button" onclick="GetRectAreaResults();">{% trans 'Filter results by map viewport' %}</button>
        </div>
            {% if station_list %}
              {% render_table table %}
            {% else %}
              <p>{% trans "No entries found." %}</p>
            {% endif %}
        	<br />
        </div>

{% endblock %}
